<% @title="Role" %>
<h1 class="center">Roles</h1>

<div class="container">
    <table class="table table-hover">
        <tr>
            <th>Id</th>
            <th>Name</th>
            <th>Description</th>
            <th>Role Permission</th>
            <th>Edit</th>
        </tr>

        <% @role.each do |role| %>                    
            <tr>
                <td><%= role.id%></td>
                <td><%= role.name%></td>
                <td><%= role.description %></td>
                <% role_permissions = RolePermission.where(role_id: role.id) %>
                <td> 
                    <% role_permissions.each do |role_permission| %>
                        <% permission_id = role_permission.permission_id %>
                        <% permissions = Permission.where(:id => permission_id) %>
                        <% permissions.each do |permission| %>
                            <%= permission.permission %> 
                        <% end %>
                    <% end %>
                </td>
                <td>
                    <%= link_to edit_role_path(role), class: "btn btn-default" do %>
                        <i class="glyphicon glyphicon-pencil"></i>
                    <% end %>
                </td>
            </tr>
        <% end %>                    
    </table>
    <%= link_to 'Add Roles', new_role_path, class: 'btn btn-success' %>
</div>