<% @title="Add Item" %>
<h1 class="center">Edit Item</h1>

<div class="row">
    <div class="col-md-6 col-md-offset-3">
        <%= form_with(model: @item, local: true, data: { turbo: false }) do |f| %>
            <%= render 'shared/error_messages' , object: f.object%>

            <%= f.label :Company%>
            <%= f.text_field :company_id, value: current_user.company.id, class: 'form-control', :readonly => true%>
            
            <%= f.label :name %>
            <%= f.text_field :name, class: 'form-control' %>

            <%= f.label :description %>
            <%= f.text_field :description, class: 'form-control' %>

            <%= f.label :quantity_stock %>
            <%= f.number_field :quantity_stock, class: 'form-control' %>

            <%= f.label :price %>
            <%= f.number_field :price, class: 'form-control', step: :any %>

            <%= f.label :Category%>
            <%= f.select :category_id,Category.all.pluck(:name,:id),{prompt:'select'},{class: "form-control"}%>

            <%= f.label :Location%>
            <div class="checkbox inline">
                <% current_user.company.locations.each do |location| %>
                    <div id = "checkboxes">
                        <%= check_box_tag "location_ids[]", location.id %>
                        <%= location.name %><br>
                    </div>

                    <div id= "price">
                        <%= f.label :outlet_price%>
                        <%= f.number_field :outlet_price, class: 'form-control', step: :any%>

                        <%= f.label :cost %>
                        <%= f.number_field :outlet_cost, class: 'form-control', step: :any %>

                        <%= f.label :profit %>
                        <%= f.number_field :outlet_profit, class: 'form-control', step: :any %>
                    </div>
                <% end %>
            </div>

            <%= f.submit "Save Changes", class: "btn btn-primary" %>
            <%= link_to 'Back', items_path, class: 'btn btn-success', style: 'width: 39.7em' %>
        <% end %>
    </div>
</div>

<script type="text/javascript">
    var checkbox = document.querySelectorAll('div#checkboxes')
    var input_checkbox = document.querySelectorAll('div#price')

    $(input_checkbox).hide()
    $(checkbox).click(function(){
        $(this).next(input_checkbox).toggle()
    })

</script>