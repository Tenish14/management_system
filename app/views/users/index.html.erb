<% @title="User" %>

<div class="container">
    <h2 class="center mt-5">Users</h2>
    <div class="table-responsive"> 
        <table class="table table-hover">
            <tr>
                <th>Id</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Username</th>
                <th>Email</th>
                <th>Role</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>

            <% @users.each do |user| %>  
                <% if current_user.company_id == user.company_id %>                   
                    <tr>
                        <td><%= user.id%></td>
                        <td><%= user.first_name%></td>
                        <td><%= user.last_name %></td>
                        <td><%= user.username%></td>
                        <td><%= user.email%></td>
                        <td><%= user.role.name%></td>
                        <td>
                            <%= link_to edit_user_path(user), class: "btn btn-warning" do %>
                                <i class="bi bi-pencil-fill"></i>
                            <% end %>
                        </td>
                        <td>
                            <%= button_to user_path(user), class: "btn btn-danger", method: :delete, data: { confirm: 'Are you sure?' } do %>
                                <i class="bi bi-trash-fill"></i>
                            <% end %>
                        </td>
                        
                    </tr>
                <% end %>
            <% end %>                    
        </table>
    </div>
    <%= link_to 'Add User', signup_path, class: 'btn btn-success' %>
</div>